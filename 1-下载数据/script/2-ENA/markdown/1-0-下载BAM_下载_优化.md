# 并行下载BAM文件脚本使用说明

## 功能特性

1. **并行下载支持**：用户可以设置并行下载的作业数量
2. **断点续传**：自动检查已存在的文件，避免重复下载
3. **彩色输出**：不同类型的信息用不同颜色显示
4. **信号处理**：Ctrl+C 时立即停止所有下载并清理未完成的文件
5. **错误重试**：每个文件最多重试3次
6. **详细统计**：显示成功和失败的下载统计

## 使用方法

### 设置并行作业数量

在脚本开头找到这一行并修改数值：
```bash
PARALLEL_JOBS=3  # 用户可以修改这个数值
```

- 设置为 `1`：使用顺序下载模式（一个接一个下载）
- 设置为 `>1`：使用并行下载模式（同时下载多个文件）

### 运行脚本

```bash
bash 1-0-下载BAM_下载_优化.sh
```

### 中断下载

按 `Ctrl+C` 可以安全地停止下载：
- 立即终止所有正在运行的wget进程
- 删除所有未完成的文件，避免误以为下载完成
- 显示清理信息

## 推荐设置

- **网络较慢**：设置 `PARALLEL_JOBS=1` 或 `PARALLEL_JOBS=2`
- **网络较快**：设置 `PARALLEL_JOBS=3` 到 `PARALLEL_JOBS=5`
- **高速网络**：可以设置更高的数值，但注意服务器限制

## 输出说明

- 🟢 `[INFO]`：一般信息
- 🟡 `[WARN]`：警告信息  
- 🔴 `[ERROR]`：错误信息
- 🟢 `[SUCCESS]`：成功信息

## 注意事项

1. 脚本会自动跳过已存在且大小不为0的文件
2. 大小为0的文件会被重新下载
3. 每个文件失败后会重试最多3次
4. 并行下载时请注意服务器的连接限制